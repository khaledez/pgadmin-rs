(()=>{var m=(()=>{let l="pgadmin-theme",h="data-theme",i="light",o="dark",c="auto",a=()=>{let e=localStorage.getItem(l);return e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?o:i)},d=()=>{let e=a();return e===c?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?o:i:e},s=e=>{let t=e===c?d():e;document.documentElement.setAttribute(h,t);let r=document.querySelector('meta[name="theme-color"]');if(r){let n={light:"#ffffff",dark:"#1f2937"};r.setAttribute("content",n[t]||n.light)}window.dispatchEvent(new CustomEvent("theme-change",{detail:{theme:t}}))},g=e=>([i,o,c].includes(e)||(console.warn(`Invalid theme: ${e}. Using 'auto'.`),e=c),localStorage.setItem(l,e),s(e),f(e),e),u=()=>{let t=a()===o?i:o;return g(t)},f=e=>{let t=document.getElementById("theme-toggle");if(!t)return;let r=t.querySelector("span");if(r){let n=e===c?d():e;r.textContent=n===o?"\u2600\uFE0F":"\u{1F319}"}t.setAttribute("aria-label",`Switch to ${e===o?"light":"dark"} mode`)},T=()=>{let e=document.createElement("button");e.id="theme-toggle",e.className="theme-toggle",e.type="button",e.title="Toggle dark/light mode";let t=a(),r=t===c?d():t,n=document.createElement("span");return n.textContent=r===o?"\u2600\uFE0F":"\u{1F319}",n.className="theme-icon",e.appendChild(n),e.addEventListener("click",()=>{u(),typeof ToastManager<"u"&&ToastManager.info(`Switched to ${d()} mode`)}),e};return{getTheme:a,getEffectiveTheme:d,setTheme:g,toggleTheme:u,init:()=>{let e=a();s(e),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",n=>{a()===c&&s(c)});let t=document.querySelector("header");if(t&&!document.getElementById("theme-toggle")){let n=T();t.appendChild(n)}},LIGHT_THEME:i,DARK_THEME:o,AUTO_THEME:c}})();document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>m.init()):m.init();window.ThemeManager=m;})();
