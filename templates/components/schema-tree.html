<div class="schema-tree">
    {% for schema in schemas %}
    <div class="schema-node">
        <div class="schema-header" data-toggle="schema-{{ loop.index }}">
            <span class="toggle-icon" id="icon-schema-{{ loop.index }}">‚ñ∂</span>
            <span class="schema-icon">üóÑÔ∏è</span>
            <span class="schema-name">{{ schema.name }}</span>
        </div>
        <div class="schema-content" id="schema-{{ loop.index }}" style="display: none;">
            <!-- Tables -->
            <div class="object-group">
                <div class="group-header" data-toggle="tables-{{ loop.index }}">
                    <span class="toggle-icon" id="icon-tables-{{ loop.index }}">‚ñ∂</span>
                    <span class="group-icon">üìä</span>
                    <span>Tables</span>
                </div>
                <div class="group-content" id="tables-{{ loop.index }}" style="display: none;"
                     hx-get="/api/schemas/{{ schema.name }}/tables-list"
                     hx-trigger="revealed"
                     hx-swap="innerHTML">
                    <div class="loading-placeholder">Loading...</div>
                </div>
            </div>

            <!-- Views -->
            <div class="object-group">
                <div class="group-header" data-toggle="views-{{ loop.index }}">
                    <span class="toggle-icon" id="icon-views-{{ loop.index }}">‚ñ∂</span>
                    <span class="group-icon">üëÅÔ∏è</span>
                    <span>Views</span>
                </div>
                <div class="group-content" id="views-{{ loop.index }}" style="display: none;"
                     hx-get="/api/schemas/{{ schema.name }}/views-list"
                     hx-trigger="revealed"
                     hx-swap="innerHTML">
                    <div class="loading-placeholder">Loading...</div>
                </div>
            </div>

            <!-- Functions -->
            <div class="object-group">
                <div class="group-header" data-toggle="functions-{{ loop.index }}">
                    <span class="toggle-icon" id="icon-functions-{{ loop.index }}">‚ñ∂</span>
                    <span class="group-icon">‚öôÔ∏è</span>
                    <span>Functions</span>
                </div>
                <div class="group-content" id="functions-{{ loop.index }}" style="display: none;"
                     hx-get="/api/schemas/{{ schema.name }}/functions-list"
                     hx-trigger="revealed"
                     hx-swap="innerHTML">
                    <div class="loading-placeholder">Loading...</div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<style>
.schema-tree {
    font-size: 0.875rem;
}

.schema-node {
    margin-bottom: var(--space-sm);
}

.schema-header, .group-header {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    padding: var(--space-sm) var(--space-md);
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: background 0.2s;
}

.schema-header:hover, .group-header:hover {
    background: var(--color-surface);
}

.toggle-icon {
    width: 12px;
    font-size: 0.7rem;
    transition: transform 0.2s;
    display: inline-block;
}

.toggle-icon.expanded {
    transform: rotate(90deg);
}

.schema-name {
    font-weight: 600;
}

.schema-content {
    padding-left: var(--space-lg);
}

.object-group {
    margin-top: var(--space-xs);
}

.group-header {
    font-size: 0.8rem;
    padding: var(--space-xs) var(--space-sm);
}

.group-content {
    padding-left: var(--space-lg);
}

.object-item {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    padding: var(--space-xs) var(--space-md);
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: all 0.2s;
    text-decoration: none;
    color: var(--color-text);
}

.object-item:hover {
    background: var(--color-border);
    color: var(--color-primary);
    transform: translateX(2px);
}

.object-item.active {
    background: var(--color-primary);
    color: white;
}

.loading-placeholder {
    padding: var(--space-sm);
    color: var(--color-text-muted);
    font-size: 0.75rem;
    font-style: italic;
}
</style>

